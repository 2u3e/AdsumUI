<div
  class="flex items-center justify-center grow bg-center bg-no-repeat page-bg"
>
  <!-- Ürün Branding - Sol üst köşe (discrete) -->
  <div class="product-branding">
    <div class="product-logo">
      <i class="ki-filled ki-element-11"></i>
    </div>
    <span class="product-name">ADSUM</span>
  </div>

  <div class="login-card max-w-[440px] w-full">
    <form
      [formGroup]="loginForm"
      (ngSubmit)="onSubmit()"
      (keypress)="onKeyPress($event)"
      class="kt-card-content flex flex-col gap-6 p-12"
      id="sign_in_form"
    >
      <!-- Müşteri Logo & Title -->
      <div class="text-center mb-2">
        <div class="client-logo-wrapper">
          <!-- Müşteri logosu -->
          <img
            src="/assets/media/logos/client-logo.png"
            alt="Firma Logosu"
            class="client-logo"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
          />
          <!-- Fallback ikon (logo yüklenemezse) -->
          <div class="client-logo-fallback">
            <i class="ki-filled ki-home-3"></i>
          </div>
        </div>
        <h3 class="login-title">Hoş Geldiniz</h3>
        <div class="login-subtitle">Hesabınıza giriş yaparak devam edin</div>
      </div>

      <!-- Hata mesajı -->
      @if (errorMessage()) {
        <div class="error-message">
          <i class="ki-filled ki-information"></i>
          <span>{{ errorMessage() }}</span>
        </div>
      }

      <!-- Kullanıcı Adı / Email alanı -->
      <div class="flex flex-col gap-2">
        <label class="input-label"> Kullanıcı Adı veya Email </label>
        <div class="input-wrapper">
          <i class="ki-filled ki-user input-icon"></i>
          <input
            class="modern-input"
            [class.error]="isFieldInvalid('username')"
            placeholder="kullaniciadi@example.com"
            type="text"
            formControlName="username"
            autocomplete="username"
          />
        </div>

        @if (isFieldInvalid("username")) {
          <span class="field-error">
            <i class="ki-filled ki-information"></i>
            {{ getFieldError("username") }}
          </span>
        }
      </div>

      <!-- Şifre alanı -->
      <div class="flex flex-col gap-2">
        <div class="flex items-center justify-between">
          <label class="input-label">Şifre</label>
          <a class="forgot-password-link" href="/forgot-password">
            Şifremi Unuttum
          </a>
        </div>
        <div class="input-wrapper">
          <i class="ki-filled ki-lock-2 input-icon"></i>
          <input
            class="modern-input"
            [class.error]="isFieldInvalid('password')"
            formControlName="password"
            placeholder="••••••••"
            [type]="showPassword() ? 'text' : 'password'"
            autocomplete="current-password"
          />
          <button
            class="password-toggle"
            type="button"
            (click)="togglePasswordVisibility()"
            [attr.aria-label]="
              showPassword() ? 'Şifreyi gizle' : 'Şifreyi göster'
            "
          >
            @if (showPassword()) {
              <i class="ki-filled ki-eye-slash"></i>
            } @else {
              <i class="ki-filled ki-eye"></i>
            }
          </button>
        </div>

        @if (isFieldInvalid("password")) {
          <span class="field-error">
            <i class="ki-filled ki-information"></i>
            {{ getFieldError("password") }}
          </span>
        }
      </div>

      <!-- Giriş butonu -->
      <button class="login-button" type="submit" [disabled]="isLoading()">
        @if (isLoading()) {
          <span class="flex items-center gap-2">
            <div class="spinner"></div>
            Giriş Yapılıyor...
          </span>
        } @else {
          Giriş Yap
        }
      </button>
    </form>
  </div>

  <!-- Footer - Powered by -->
  <div class="page-footer">
    <div class="footer-content">
      <span class="powered-by">Powered by</span>
      <span class="footer-brand">Adsum</span>
      <span class="footer-divider">•</span>
      <span class="footer-version">v1.0.0</span>
      <span class="footer-divider">•</span>
      <span class="footer-copyright">© 2025</span>
    </div>
  </div>
</div>
